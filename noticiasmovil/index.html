<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover, orientation=portrait">
    <link rel="manifest" href="/manifest.json">
    <link rel="icon" type="image/png" href="https://pub-ed8aecbaaa68449587beb6a96960b42e.r2.dev/favicon.ico">
    <base href="/">

    <script src="lock-orientation.js"></script>

<!-- Hace que la página se vea como app en iOS (sin barra de navegación) -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Uniradio">
<link rel="apple-touch-icon" sizes="180x180" href="icons/icon-180.png">
<link rel="stylesheet" href="/menu.css">

<!-- Hace que la página se vea como app en Android -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#000000"> <!-- Color de la barra superior en Android -->

     <title>Noticias - TikTok Style</title>
    <style>
       html, body {
    overflow-x: hidden;
    width: 100%;
    max-width: 100%;
    position: fixed; /* Evita movimientos inesperados */
    height: 100%;
    -webkit-overflow-scrolling: touch; /* Mejora el scroll en iOS */
}
	    
.header {
    width: 100%;
    display: flex;
    justify-content: center; /* Centra el logo */
    background: #222;
    padding: 20px 0;
}

.logo {
    max-width: 280px;
    display: block;
    margin: 0 auto;
}

        
        h1 {
            text-align: center;
        }
        
        .seccion {
            margin-bottom: 30px;
            position: relative;
        }

        .titulo-seccion {
            font-size: 22px;
            text-align: center;
            margin-bottom: 10px;
        }
        
  .carrusel-container {
            position: relative;
            overflow: hidden;
        }

        .carrusel {
            display: flex;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding-bottom: 10px;
            white-space: nowrap;
            scroll-snap-type: x mandatory;
        }

        .carrusel::-webkit-scrollbar {
            display: none;
        }


       
         /* Contenedor del ticker */
        .ticker-container {
            position: fixed;
            bottom: 65px;
            left: 0;
            width: 100%;
            background: black;
            color: white;
            display: flex;
            align-items: center;
            overflow: hidden;
            height: 50px; /* Aumentamos el grosor */
            z-index: 1000;
        }

        /* Estilo del trapezoide para "ÚLTIMA HORA" */
        .ticker-label {
            background: #C9362B;
            color: white;
            font-weight: bold;
            padding: 0 40px;
            height: 100%;
            display: flex;
            align-items: center;
            clip-path: polygon(0 0, 100% 0, 80% 100%, 0 100%);
            white-space: nowrap;
            margin-right: 1px;
            font-size: 12px;
        }

        /* Carrusel de noticias */
        .ticker-wrapper {
            flex-grow: 1;
            overflow: hidden;
            background: black;
            display: flex;
            align-items: center;
        }

        .ticker-content {
            display: flex;
            white-space: nowrap;
            will-change: transform;
            animation: scrollTicker linear infinite;
        }

        .ticker-content a {
            padding: 0 50px; /* Espaciado entre noticias */
            color: white;
            text-decoration: none;
            font-weight: bold;
            white-space: nowrap;
        }

        .ticker-content a:hover {
            text-decoration: underline;
        }

        /* Animación infinita */
        @keyframes scrollTicker {
            from {
                transform: translateX(0%);
            }
            to {
                transform: translateX(-50%);
            }
        }
        
       .seccion {
            margin-bottom: 30px;
            position: relative;
        }

        .titulo-seccion {
            font-size: 22px;
            text-align: center;
            margin-bottom: 10px;
        }

        .carrusel-container {
            position: relative;
            overflow: hidden;
        }

        .carrusel {
            display: flex;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding-bottom: 10px;
            white-space: nowrap;
            scroll-snap-type: x mandatory;
        }

        .carrusel::-webkit-scrollbar {
            display: none;
        }

        .noticia {
    width: 500px; /* Ancho fijo */
    height: 250px; /* Alto fijo para evitar que el texto desborde */
    background-color: #fff;
    color: black;
    padding: 10px;
    margin: 1px;
    border-radius: 3px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    overflow: hidden;
    flex: 0 0 calc(20% - 10px); /* Tamaño uniforme */
    max-width: calc(20% - 10px);
    border: 0.5px solid #BCBCBC; 
    
}


        .noticia:hover {
            transform: scale(1.05);
        }

     .noticia img {
    width: 100%;
    height: 120px; /* Tamaño fijo de la imagen */
    object-fit: cover; /* Recorta la imagen para que encaje */
    border-radius: 5px;
}

.noticia h3 {
    font-size: 14px;
    margin: 5px 0;
    text-align: center;
    white-space: wrap;
    overflow: hidden;
    text-overflow: ellipsis;
    line-height: 1em;
    height: 8em;       /* height is 2x line-height, so two lines will display */
    overflow: hidden;  /* prevents extra lines from being visible */
    white-space: wrap;
 
}

.noticia p {
    font-size: 12px;
    color: #5B5B5B;
    text-overflow: ellipsis;
    display: -webkit-box;
    line-height: 1em;
    height: 8em;       /* height is 2x line-height, so two lines will display */
    overflow: hidden;  /* prevents extra lines from being visible */
    white-space: wrap;
 
}

        .noticia a {
            display: block;
            text-decoration: none;
            color: #1e90ff;
            font-size: 14px;
            margin-top: 5px;
        }

        .btn-navegacion {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.6);
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 10px;
            border-radius: 50%;
            z-index: 10;
        }

        .btn-prev { left: 5px; }
        .btn-next { right: 5px; }

.contenedor-seccion {
    width: 100%;
    padding: 10px 0;
}

.fila-noticias {
    display: flex;
    flex-wrap: nowrap;
    overflow-x: auto;
    padding-bottom: 10px;
    justify-content: center;
    gap: 10px;
}

.seccion-internacionales {
    display: flex;
    flex-wrap: wrap; /* Permite que las noticias se ajusten automáticamente a las filas */
    gap: 20px; /* Espaciado entre noticias */
    justify-content: flex-start; /* Alinea las noticias al inicio */
    margin: 0 auto;
    padding: 20px 10px;
    overflow: visible; /* Permite que las noticias se desborden si es necesario */
}

/* Asegurar que Nacionales y Locales ocupen todo el ancho */
.seccion-nacionales .fila-noticias,
.seccion-locales .fila-noticias {
    justify-content: space-between;
}

 .dividerlineal {
           margin: 40px 50px;
           border-top: 6px solid #bbb;
        }

	         /* Contenedor de noticias en 2 columnas */
.grid-noticias {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* 2 columnas */
    gap: 10px; /* Espaciado entre noticias */
    padding: 10px;
}

/* Ajuste para que las noticias se adapten mejor */
.noticia {
    width: 100%; /* Que ocupe todo el ancho de la columna */
    max-width: 100%;
    height: auto; /* Que se adapte al contenido */
}
        
      
    </style>
</head>
<body>

	  <header class="header">
        <a href="/">
        <img src="https://pub-7da5e362aaa441968e04a87faea5f098.r2.dev/GEU.png" alt="UNIRADIO" class="logo">
            </a>
    </header>


 <div class="contenedor">
    <h1>Noticias Uniradio</h1>

    <div class="seccion">
        <div class="titulo-seccion">Internacionales</div>
        <div class="grid-noticias" id="noticias-internacionales"></div>
    </div>

    <div class="dividerlineal"></div>

    <div class="seccion">
        <div class="titulo-seccion">Nacionales</div>           
        <div class="grid-noticias" id="noticias-nacionales"></div>
    </div>

    <div class="dividerlineal"></div>

    <div class="seccion">
        <div class="titulo-seccion">Deportes y Entretenimiento</div>
        <div class="grid-noticias" id="noticias-locales"></div>
    </div>
</div>


	
   <script>
   
    document.addEventListener("DOMContentLoaded", function () {
    // Definir los feeds para cada categoría
    const feeds = {
        "noticias-internacionales": [
	    { url: "https://feeds.elpais.com/mrss-s/pages/ep/site/elpais.com/section/internacional/portada", noticiasPorFeed: 2 },
            { url: "https://feeds.elpais.com/mrss-s/pages/ep/site/elpais.com/section/america/portada", noticiasPorFeed: 2 },
	    { url: "https://feeds.elpais.com/mrss-s/pages/ep/site/elpais.com/section/economia/portada", noticiasPorFeed: 3 },
            { url: "https://feeds.elpais.com/mrss-s/pages/ep/site/elpais.com/section/mexico/portada", noticiasPorFeed: 2 },          
	    { url: "https://feeds.elpais.com/mrss-s/pages/ep/site/elpais.com/section/deportes/portada", noticiasPorFeed: 3 }
                   
        ],
        "noticias-nacionales": [
            { url: "https://www.tunota.com/rss/honduras-hoy.xml", noticiasPorFeed: 4 },
            { url: "https://www.tunota.com/rss/politica.xml", noticiasPorFeed: 4 },
            { url: "https://www.tunota.com/rss/radar-comercial.xml", noticiasPorFeed: 4 }
        ],
        "noticias-locales": [
            { url: "https://www.tunota.com/rss/deportes.xml", noticiasPorFeed: 5 },
            { url: "https://www.tunota.com/rss/entretenimiento.xml", noticiasPorFeed: 5 }
        ]
    };

    // Cargar los feeds
    for (const categoria in feeds) {
        feeds[categoria].forEach(feed => cargarNoticias(feed.url, categoria, feed.noticiasPorFeed));
    }
});

function cargarNoticias(feedUrl, contenedorId, maxNoticiasPorFeed) {
const proxy = "https://api.allorigins.win/raw?url=";
fetch(proxy + encodeURIComponent(feedUrl))
        .then(response => response.text())
        .then(data => {
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(data, "application/xml");

            if (xmlDoc.querySelector("parsererror")) {
                console.error(`Error al parsear el feed: ${feedUrl}`);
                return;
            }

            const items = xmlDoc.getElementsByTagName("item");
            let noticiasHTML = "";

            for (let i = 0; i < Math.min(items.length, maxNoticiasPorFeed); i++) {
                const item = items[i];
                const title = item.querySelector("title")?.textContent || "Sin título";
                const description = item.querySelector("description")?.textContent || "Sin descripción";
                const link = item.querySelector("link")?.textContent || "#";
                
                // Buscar imagen en distintas etiquetas
                let thumbnail = item.querySelector("media\\:content, content")?.getAttribute("url") ||
                                item.querySelector("media\\:thumbnail, thumbnail")?.getAttribute("url") || "";

                // Generar HTML para la noticia
                noticiasHTML += `
                    <div class="noticia">
                        <h3>${title}</h3>
                        ${thumbnail ? `<img src="${thumbnail}" alt="${title}">` : ""}      
                        <p>${description.substring(0, 80)}...</p>
                        <a href="${link}" target="_blank">Ver noticia completa</a>
                    </div>
                `;
            }

            // Agregar las noticias al contenedor
            document.getElementById(contenedorId).innerHTML += noticiasHTML;
        })
        .catch(error => console.error(`Error cargando el feed ${feedUrl}:`, error));
}

</script>

<script>
    async function cargarNoticiasT() {
        const rssFeeds = [
            "https://www.eltiempo.com/rss/mundo.xml",
            "https://www.bbc.com/mundo/ultimas_noticias/index.xml",
            "https://rss.nytimes.com/services/xml/rss/nyt/World.xml"
        ];

        let noticias = [];

        for (let feed of rssFeeds) {
            try {
                const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(feed)}`);
                const data = await response.json();
                
                if (!data || !data.contents) {
                    console.error("Error: No se pudieron obtener los datos del RSS.");
                    continue;
                }

                const parser = new DOMParser();
                const xml = parser.parseFromString(data.contents, "text/xml");
                const items = xml.querySelectorAll("item");

                let noticiasFiltradas = Array.from(items)
                    .slice(0, 5) // Obtener las primeras 5 noticias
                    .map(item => {
                        const title = item.querySelector("title").textContent;
                        const link = item.querySelector("link").textContent;
                        return `<a href="${link}" target="_blank">${title}</a>`;
                    });

                noticias.push(...noticiasFiltradas);
            } catch (error) {
                console.error("Error al cargar el RSS:", error);
            }
        }

        if (noticias.length > 0) {
            let ticker = document.getElementById("ticker");
            
            // Duplicamos las noticias para que la animación sea infinita sin cortes
            ticker.innerHTML = noticias.join(" &bull; ") + " " + noticias.join(" &bull; ");

            // Ajustamos la duración de la animación según la cantidad de noticias y su longitud
            let duracion = Math.max(15, noticias.length * 5); // Un mínimo de 15s para evitar velocidad excesiva
            ticker.style.animationDuration = duracion + "s";
        } else {
            document.getElementById("ticker").innerHTML = "<span>No se encontraron noticias</span>";
        }
    }

    cargarNoticiasT();
</script>

<div class="ticker-container">
    <div class="ticker-label">ÚLTIMA HORA</div>
    <div class="ticker-wrapper">
        <div class="ticker-content" id="ticker">
            <span>Cargando noticias...</span>
        </div>
    </div>
</div>

    
    <div id="bottom-nav-container"></div>
    <script src="bottomNav.js"></script>


</body>
</html>
